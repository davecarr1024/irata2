# IRATA2 Instruction Set Architecture Definition
# Single source of truth for all instruction definitions

# Addressing Modes
addressing_modes:
  - name: Implied
    code: IMP
    operands: 0
    description: "No operands"

  - name: Immediate
    code: IMM
    operands: 1
    description: "Immediate operand"

  - name: Absolute
    code: ABS
    operands: 2
    description: "Absolute 16-bit address"

# Status Flags
status_flags:
  - name: Zero
    code: Z
    bit: 0
    description: "Set if result is zero"

  - name: Negative
    code: N
    bit: 1
    description: "Set if result bit 7 is set"

  - name: Carry
    code: C
    bit: 2
    description: "Set if carry out or borrow"

  - name: Overflow
    code: V
    bit: 3
    description: "Set if signed overflow"

# Instructions
instructions:
  # System Instructions
  - mnemonic: HLT
    opcode: 0x01
    addressing_mode: IMP
    cycles: 1
    description: "Halt execution"
    category: System
    flags_affected: []

  - mnemonic: NOP
    opcode: 0x02
    addressing_mode: IMP
    cycles: 1
    description: "No operation"
    category: System
    flags_affected: []

  - mnemonic: LDA
    opcode: 0x10
    addressing_mode: IMM
    cycles: 2
    description: "Load accumulator (immediate)"
    category: Load
    flags_affected: [Z, N]

  - mnemonic: CMP
    opcode: 0x11
    addressing_mode: IMM
    cycles: 2
    description: "Compare accumulator (immediate)"
    category: Compare
    flags_affected: [Z, N, C]

  - mnemonic: JEQ
    opcode: 0x12
    addressing_mode: ABS
    cycles: 3
    description: "Jump if equal (absolute)"
    category: Branch
    flags_affected: []

  - mnemonic: CRS
    opcode: 0xFF
    addressing_mode: IMP
    cycles: 1
    description: "Crash (for testing)"
    category: System
    flags_affected: []
