# IRATA2 Instruction Set Architecture Definition
# Single source of truth for all instruction definitions

# Addressing Modes
addressing_modes:
  - name: Implied
    code: IMP
    operands: 0
    description: "No operands"

  - name: Immediate
    code: IMM
    operands: 1
    description: "Immediate operand"

  - name: Absolute
    code: ABS
    operands: 2
    description: "Absolute 16-bit address"

  - name: ZeroPage
    code: ZP
    operands: 1
    description: "Zero page address (0x00XX)"

# Status Flags
status_flags:
  - name: Zero
    code: Z
    bit: 0
    description: "Set if result is zero"

  - name: Negative
    code: N
    bit: 1
    description: "Set if result bit 7 is set"

  - name: Carry
    code: C
    bit: 2
    description: "Set if carry out or borrow"

  - name: Overflow
    code: V
    bit: 3
    description: "Set if signed overflow"

# Instructions
instructions:
  # System Instructions
  - mnemonic: HLT
    opcode: 0x01
    addressing_mode: IMP
    cycles: 1
    description: "Halt execution"
    category: System
    flags_affected: []

  - mnemonic: NOP
    opcode: 0x02
    addressing_mode: IMP
    cycles: 1
    description: "No operation"
    category: System
    flags_affected: []

  - mnemonic: LDA
    opcode: 0x10
    addressing_mode: IMM
    cycles: 2
    description: "Load accumulator (immediate)"
    category: Load
    flags_affected: [Z, N]

  - mnemonic: CMP
    opcode: 0x11
    addressing_mode: IMM
    cycles: 2
    description: "Compare accumulator (immediate)"
    category: Compare
    flags_affected: [Z, N, C]

  - mnemonic: JEQ
    opcode: 0x12
    addressing_mode: ABS
    cycles: 3
    description: "Jump if equal (absolute)"
    category: Branch
    flags_affected: []

  # Arithmetic Instructions
  - mnemonic: ADC
    opcode: 0x20
    addressing_mode: IMM
    cycles: 2
    description: "Add with carry (immediate)"
    category: Arithmetic
    flags_affected: [Z, N, C, V]

  - mnemonic: SBC
    opcode: 0x21
    addressing_mode: IMM
    cycles: 2
    description: "Subtract with carry (immediate)"
    category: Arithmetic
    flags_affected: [Z, N, C, V]

  # Logic Instructions
  - mnemonic: AND
    opcode: 0x22
    addressing_mode: IMM
    cycles: 2
    description: "Logical AND (immediate)"
    category: Logic
    flags_affected: [Z, N]

  - mnemonic: ORA
    opcode: 0x23
    addressing_mode: IMM
    cycles: 2
    description: "Logical OR (immediate)"
    category: Logic
    flags_affected: [Z, N]

  - mnemonic: EOR
    opcode: 0x24
    addressing_mode: IMM
    cycles: 2
    description: "Logical XOR (immediate)"
    category: Logic
    flags_affected: [Z, N]

  # Shift Instructions (Accumulator)
  - mnemonic: ASL
    opcode: 0x25
    addressing_mode: IMP
    cycles: 1
    description: "Arithmetic shift left (accumulator)"
    category: Shift
    flags_affected: [Z, N, C]

  - mnemonic: LSR
    opcode: 0x26
    addressing_mode: IMP
    cycles: 1
    description: "Logical shift right (accumulator)"
    category: Shift
    flags_affected: [Z, N, C]

  - mnemonic: ROL
    opcode: 0x27
    addressing_mode: IMP
    cycles: 1
    description: "Rotate left (accumulator)"
    category: Shift
    flags_affected: [Z, N, C]

  - mnemonic: ROR
    opcode: 0x28
    addressing_mode: IMP
    cycles: 1
    description: "Rotate right (accumulator)"
    category: Shift
    flags_affected: [Z, N, C]

  # Register Transfer Instructions
  - mnemonic: TAX
    opcode: 0x30
    addressing_mode: IMP
    cycles: 1
    description: "Transfer A to X"
    category: Transfer
    flags_affected: [Z, N]

  - mnemonic: TXA
    opcode: 0x31
    addressing_mode: IMP
    cycles: 1
    description: "Transfer X to A"
    category: Transfer
    flags_affected: [Z, N]

  - mnemonic: LDX
    opcode: 0x32
    addressing_mode: IMM
    cycles: 2
    description: "Load X register (immediate)"
    category: Load
    flags_affected: [Z, N]

  # Zero Page Load/Store Instructions
  - mnemonic: LDA
    opcode: 0x40
    addressing_mode: ZP
    cycles: 3
    description: "Load accumulator (zero page)"
    category: Load
    flags_affected: [Z, N]

  - mnemonic: STA
    opcode: 0x41
    addressing_mode: ZP
    cycles: 3
    description: "Store accumulator (zero page)"
    category: Store
    flags_affected: []

  - mnemonic: LDX
    opcode: 0x42
    addressing_mode: ZP
    cycles: 3
    description: "Load X register (zero page)"
    category: Load
    flags_affected: [Z, N]

  - mnemonic: STX
    opcode: 0x43
    addressing_mode: ZP
    cycles: 3
    description: "Store X register (zero page)"
    category: Store
    flags_affected: []

  # Zero Page ALU Instructions
  - mnemonic: ADC
    opcode: 0x44
    addressing_mode: ZP
    cycles: 4
    description: "Add with carry (zero page)"
    category: Arithmetic
    flags_affected: [Z, N, C, V]

  - mnemonic: SBC
    opcode: 0x45
    addressing_mode: ZP
    cycles: 4
    description: "Subtract with carry (zero page)"
    category: Arithmetic
    flags_affected: [Z, N, C, V]

  - mnemonic: AND
    opcode: 0x46
    addressing_mode: ZP
    cycles: 4
    description: "Logical AND (zero page)"
    category: Logic
    flags_affected: [Z, N]

  - mnemonic: ORA
    opcode: 0x47
    addressing_mode: ZP
    cycles: 4
    description: "Logical OR (zero page)"
    category: Logic
    flags_affected: [Z, N]

  - mnemonic: EOR
    opcode: 0x48
    addressing_mode: ZP
    cycles: 4
    description: "Logical XOR (zero page)"
    category: Logic
    flags_affected: [Z, N]

  - mnemonic: CMP
    opcode: 0x49
    addressing_mode: ZP
    cycles: 4
    description: "Compare accumulator (zero page)"
    category: Compare
    flags_affected: [Z, N, C]

  # Zero Page Shift Instructions
  - mnemonic: ASL
    opcode: 0x4A
    addressing_mode: ZP
    cycles: 5
    description: "Arithmetic shift left (zero page)"
    category: Shift
    flags_affected: [Z, N, C]

  - mnemonic: LSR
    opcode: 0x4B
    addressing_mode: ZP
    cycles: 5
    description: "Logical shift right (zero page)"
    category: Shift
    flags_affected: [Z, N, C]

  - mnemonic: ROL
    opcode: 0x4C
    addressing_mode: ZP
    cycles: 5
    description: "Rotate left (zero page)"
    category: Shift
    flags_affected: [Z, N, C]

  - mnemonic: ROR
    opcode: 0x4D
    addressing_mode: ZP
    cycles: 5
    description: "Rotate right (zero page)"
    category: Shift
    flags_affected: [Z, N, C]

  - mnemonic: CRS
    opcode: 0xFF
    addressing_mode: IMP
    cycles: 1
    description: "Crash (for testing)"
    category: System
    flags_affected: []
