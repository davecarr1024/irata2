# IRATA2 Instruction Set Architecture Definition
# Single source of truth for all instruction definitions

# Addressing Modes
addressing_modes:
  - name: Implied
    code: IMP
    operands: 0
    description: "No operands"

  - name: Immediate
    code: IMM
    operands: 1
    description: "8-bit immediate value"
    syntax: "#$%02X"

  - name: ZeroPage
    code: ZPG
    operands: 1
    description: "8-bit zero page address"
    syntax: "$%02X"

  - name: ZeroPageX
    code: ZPX
    operands: 1
    description: "8-bit zero page address + X"
    syntax: "$%02X,X"

  - name: ZeroPageY
    code: ZPY
    operands: 1
    description: "8-bit zero page address + Y"
    syntax: "$%02X,Y"

  - name: Absolute
    code: ABS
    operands: 2
    description: "16-bit absolute address"
    syntax: "$%04X"

  - name: AbsoluteX
    code: ABX
    operands: 2
    description: "16-bit absolute address + X"
    syntax: "$%04X,X"

  - name: AbsoluteY
    code: ABY
    operands: 2
    description: "16-bit absolute address + Y"
    syntax: "$%04X,Y"

  - name: Indirect
    code: IND
    operands: 2
    description: "16-bit indirect address"
    syntax: "($%04X)"

  - name: IndirectX
    code: IDX
    operands: 1
    description: "8-bit zero page address + X, indirect"
    syntax: "($%02X,X)"

  - name: IndirectY
    code: IDY
    operands: 1
    description: "8-bit zero page address, indirect + Y"
    syntax: "($%02X),Y"

  - name: Relative
    code: REL
    operands: 1
    description: "8-bit signed relative offset"
    syntax: "$%02X"

# Status Flags
status_flags:
  - name: Zero
    code: Z
    bit: 0
    description: "Set if result is zero"

  - name: Negative
    code: N
    bit: 1
    description: "Set if result bit 7 is set"

  - name: Carry
    code: C
    bit: 2
    description: "Set if carry out or borrow"

  - name: Overflow
    code: V
    bit: 3
    description: "Set if signed overflow"

# Instructions
instructions:
  # System Instructions
  - mnemonic: HLT
    opcode: 0x01
    addressing_mode: IMP
    cycles: 1
    description: "Halt execution"
    category: System
    flags_affected: []

  - mnemonic: NOP
    opcode: 0x02
    addressing_mode: IMP
    cycles: 1
    description: "No operation"
    category: System
    flags_affected: []

  - mnemonic: CRS
    opcode: 0x03
    addressing_mode: IMP
    cycles: 1
    description: "Crash (for testing)"
    category: System
    flags_affected: []

  # Load Instructions
  - mnemonic: LDA
    opcode: 0xA0
    addressing_mode: IMM
    cycles: 2
    description: "Load accumulator with immediate value"
    category: Load
    flags_affected: [Z, N]

  - mnemonic: LDA
    opcode: 0xA1
    addressing_mode: ZPG
    cycles: 3
    description: "Load accumulator from zero page"
    category: Load
    flags_affected: [Z, N]

  - mnemonic: LDA
    opcode: 0xA2
    addressing_mode: ZPX
    cycles: 4
    description: "Load accumulator from zero page,X"
    category: Load
    flags_affected: [Z, N]

  - mnemonic: LDA
    opcode: 0xA3
    addressing_mode: ABS
    cycles: 4
    description: "Load accumulator from absolute address"
    category: Load
    flags_affected: [Z, N]

  - mnemonic: LDA
    opcode: 0xA4
    addressing_mode: ABX
    cycles: 4
    description: "Load accumulator from absolute,X"
    category: Load
    flags_affected: [Z, N]

  - mnemonic: LDA
    opcode: 0xA5
    addressing_mode: ABY
    cycles: 4
    description: "Load accumulator from absolute,Y"
    category: Load
    flags_affected: [Z, N]

  - mnemonic: LDX
    opcode: 0xB0
    addressing_mode: IMM
    cycles: 2
    description: "Load X register with immediate value"
    category: Load
    flags_affected: [Z, N]

  - mnemonic: LDX
    opcode: 0xB1
    addressing_mode: ZPG
    cycles: 3
    description: "Load X register from zero page"
    category: Load
    flags_affected: [Z, N]

  - mnemonic: LDX
    opcode: 0xB2
    addressing_mode: ABS
    cycles: 4
    description: "Load X register from absolute address"
    category: Load
    flags_affected: [Z, N]

  - mnemonic: LDY
    opcode: 0xC0
    addressing_mode: IMM
    cycles: 2
    description: "Load Y register with immediate value"
    category: Load
    flags_affected: [Z, N]

  - mnemonic: LDY
    opcode: 0xC1
    addressing_mode: ZPG
    cycles: 3
    description: "Load Y register from zero page"
    category: Load
    flags_affected: [Z, N]

  - mnemonic: LDY
    opcode: 0xC2
    addressing_mode: ABS
    cycles: 4
    description: "Load Y register from absolute address"
    category: Load
    flags_affected: [Z, N]

  # Store Instructions
  - mnemonic: STA
    opcode: 0xD0
    addressing_mode: ZPG
    cycles: 3
    description: "Store accumulator to zero page"
    category: Store
    flags_affected: []

  - mnemonic: STA
    opcode: 0xD1
    addressing_mode: ZPX
    cycles: 4
    description: "Store accumulator to zero page,X"
    category: Store
    flags_affected: []

  - mnemonic: STA
    opcode: 0xD2
    addressing_mode: ABS
    cycles: 4
    description: "Store accumulator to absolute address"
    category: Store
    flags_affected: []

  - mnemonic: STA
    opcode: 0xD3
    addressing_mode: ABX
    cycles: 4
    description: "Store accumulator to absolute,X"
    category: Store
    flags_affected: []

  - mnemonic: STA
    opcode: 0xD4
    addressing_mode: ABY
    cycles: 4
    description: "Store accumulator to absolute,Y"
    category: Store
    flags_affected: []

  - mnemonic: STX
    opcode: 0xE0
    addressing_mode: ZPG
    cycles: 3
    description: "Store X register to zero page"
    category: Store
    flags_affected: []

  - mnemonic: STX
    opcode: 0xE1
    addressing_mode: ABS
    cycles: 4
    description: "Store X register to absolute address"
    category: Store
    flags_affected: []

  - mnemonic: STY
    opcode: 0xE2
    addressing_mode: ZPG
    cycles: 3
    description: "Store Y register to zero page"
    category: Store
    flags_affected: []

  - mnemonic: STY
    opcode: 0xE3
    addressing_mode: ABS
    cycles: 4
    description: "Store Y register to absolute address"
    category: Store
    flags_affected: []

  # Arithmetic Instructions
  - mnemonic: ADC
    opcode: 0x10
    addressing_mode: IMM
    cycles: 2
    description: "Add with carry - immediate"
    category: Arithmetic
    flags_affected: [Z, N, C, V]

  - mnemonic: ADC
    opcode: 0x11
    addressing_mode: ZPG
    cycles: 3
    description: "Add with carry - zero page"
    category: Arithmetic
    flags_affected: [Z, N, C, V]

  - mnemonic: ADC
    opcode: 0x12
    addressing_mode: ABS
    cycles: 4
    description: "Add with carry - absolute"
    category: Arithmetic
    flags_affected: [Z, N, C, V]

  - mnemonic: SBC
    opcode: 0x13
    addressing_mode: IMM
    cycles: 2
    description: "Subtract with carry - immediate"
    category: Arithmetic
    flags_affected: [Z, N, C, V]

  - mnemonic: SBC
    opcode: 0x14
    addressing_mode: ZPG
    cycles: 3
    description: "Subtract with carry - zero page"
    category: Arithmetic
    flags_affected: [Z, N, C, V]

  - mnemonic: SBC
    opcode: 0x15
    addressing_mode: ABS
    cycles: 4
    description: "Subtract with carry - absolute"
    category: Arithmetic
    flags_affected: [Z, N, C, V]

  # Logic Instructions
  - mnemonic: AND
    opcode: 0x20
    addressing_mode: IMM
    cycles: 2
    description: "Logical AND - immediate"
    category: Logic
    flags_affected: [Z, N]

  - mnemonic: AND
    opcode: 0x21
    addressing_mode: ZPG
    cycles: 3
    description: "Logical AND - zero page"
    category: Logic
    flags_affected: [Z, N]

  - mnemonic: ORA
    opcode: 0x22
    addressing_mode: IMM
    cycles: 2
    description: "Logical OR - immediate"
    category: Logic
    flags_affected: [Z, N]

  - mnemonic: ORA
    opcode: 0x23
    addressing_mode: ZPG
    cycles: 3
    description: "Logical OR - zero page"
    category: Logic
    flags_affected: [Z, N]

  - mnemonic: EOR
    opcode: 0x24
    addressing_mode: IMM
    cycles: 2
    description: "Logical XOR - immediate"
    category: Logic
    flags_affected: [Z, N]

  - mnemonic: EOR
    opcode: 0x25
    addressing_mode: ZPG
    cycles: 3
    description: "Logical XOR - zero page"
    category: Logic
    flags_affected: [Z, N]

  # Compare Instructions
  - mnemonic: CMP
    opcode: 0x30
    addressing_mode: IMM
    cycles: 2
    description: "Compare accumulator - immediate"
    category: Compare
    flags_affected: [Z, N, C]

  - mnemonic: CMP
    opcode: 0x31
    addressing_mode: ZPG
    cycles: 3
    description: "Compare accumulator - zero page"
    category: Compare
    flags_affected: [Z, N, C]

  - mnemonic: CMP
    opcode: 0x32
    addressing_mode: ABS
    cycles: 4
    description: "Compare accumulator - absolute"
    category: Compare
    flags_affected: [Z, N, C]

  - mnemonic: CPX
    opcode: 0x33
    addressing_mode: IMM
    cycles: 2
    description: "Compare X register - immediate"
    category: Compare
    flags_affected: [Z, N, C]

  - mnemonic: CPY
    opcode: 0x34
    addressing_mode: IMM
    cycles: 2
    description: "Compare Y register - immediate"
    category: Compare
    flags_affected: [Z, N, C]

  # Branch Instructions
  - mnemonic: BEQ
    opcode: 0x40
    addressing_mode: REL
    cycles: 2
    description: "Branch if equal (zero flag set)"
    category: Branch
    flags_affected: []

  - mnemonic: BNE
    opcode: 0x41
    addressing_mode: REL
    cycles: 2
    description: "Branch if not equal (zero flag clear)"
    category: Branch
    flags_affected: []

  - mnemonic: BCS
    opcode: 0x42
    addressing_mode: REL
    cycles: 2
    description: "Branch if carry set"
    category: Branch
    flags_affected: []

  - mnemonic: BCC
    opcode: 0x43
    addressing_mode: REL
    cycles: 2
    description: "Branch if carry clear"
    category: Branch
    flags_affected: []

  - mnemonic: BMI
    opcode: 0x44
    addressing_mode: REL
    cycles: 2
    description: "Branch if minus (negative flag set)"
    category: Branch
    flags_affected: []

  - mnemonic: BPL
    opcode: 0x45
    addressing_mode: REL
    cycles: 2
    description: "Branch if plus (negative flag clear)"
    category: Branch
    flags_affected: []

  - mnemonic: BVS
    opcode: 0x46
    addressing_mode: REL
    cycles: 2
    description: "Branch if overflow set"
    category: Branch
    flags_affected: []

  - mnemonic: BVC
    opcode: 0x47
    addressing_mode: REL
    cycles: 2
    description: "Branch if overflow clear"
    category: Branch
    flags_affected: []

  # Jump Instructions
  - mnemonic: JMP
    opcode: 0x50
    addressing_mode: ABS
    cycles: 3
    description: "Jump to absolute address"
    category: Jump
    flags_affected: []

  - mnemonic: JMP
    opcode: 0x51
    addressing_mode: IND
    cycles: 5
    description: "Jump to indirect address"
    category: Jump
    flags_affected: []

  - mnemonic: JSR
    opcode: 0x52
    addressing_mode: ABS
    cycles: 6
    description: "Jump to subroutine"
    category: Jump
    flags_affected: []

  - mnemonic: RTS
    opcode: 0x53
    addressing_mode: IMP
    cycles: 6
    description: "Return from subroutine"
    category: Jump
    flags_affected: []

  # Transfer Instructions
  - mnemonic: TAX
    opcode: 0x60
    addressing_mode: IMP
    cycles: 2
    description: "Transfer A to X"
    category: Transfer
    flags_affected: [Z, N]

  - mnemonic: TAY
    opcode: 0x61
    addressing_mode: IMP
    cycles: 2
    description: "Transfer A to Y"
    category: Transfer
    flags_affected: [Z, N]

  - mnemonic: TXA
    opcode: 0x62
    addressing_mode: IMP
    cycles: 2
    description: "Transfer X to A"
    category: Transfer
    flags_affected: [Z, N]

  - mnemonic: TYA
    opcode: 0x63
    addressing_mode: IMP
    cycles: 2
    description: "Transfer Y to A"
    category: Transfer
    flags_affected: [Z, N]

  # Stack Instructions
  - mnemonic: PHA
    opcode: 0x70
    addressing_mode: IMP
    cycles: 3
    description: "Push accumulator to stack"
    category: Stack
    flags_affected: []

  - mnemonic: PLA
    opcode: 0x71
    addressing_mode: IMP
    cycles: 4
    description: "Pull accumulator from stack"
    category: Stack
    flags_affected: [Z, N]

  - mnemonic: PHP
    opcode: 0x72
    addressing_mode: IMP
    cycles: 3
    description: "Push status flags to stack"
    category: Stack
    flags_affected: []

  - mnemonic: PLP
    opcode: 0x73
    addressing_mode: IMP
    cycles: 4
    description: "Pull status flags from stack"
    category: Stack
    flags_affected: [Z, N, C, V]
